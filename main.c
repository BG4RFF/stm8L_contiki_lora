/*
*********************************************************************************************************
*                                        IAR Embedded Workbench for STMicroelectronics STM8 IED
*                                            MCU=STM8L151C8T6D RF=Sx1278 OS=Contiki V2.7
*
* Filename   	: main.h
* Programmer : JiangJun
* Description	: Entry of the C program
* Date           : 2016-07-13
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                             				INCLUDE FILES
*********************************************************************************************************
*/
#include <string.h>
#include "contiki.h"
#include "autostart.h"
#include "pt-sem.h"
#include "rtimer.h"
#include "Dbg.h"
#include "Chip.h"
#include "DebugPort.h"
#include "Monitor.h"
#include "Demo.h"
#include "Key.h"


/*
*********************************************************************************************************
*                                            			        DEFINITIONS / TYPEDEFS
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                            				  FUNCTION PROTOTYPES
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                             				LOCAL VARIABLES
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                             			      GLOBAL VARIABLES
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                              					main()
* Description: This is the 'standard' C startup entry point.
* Arguments: None
* Returns    : main() should NEVER return
* Note(s)    : None
*********************************************************************************************************
*/
void main(void)
{
    /* Initialize hardware */
    chip_Init();

    clock_init();
    rtimer_init();	

    dp_Init();
    key_Init();

    HAL_ENABLE_INTERRUPTS();

    /* Initialize the SHT1x */
    sht1x_Init();

    /* Initialize contiki system */	
    process_init();
    process_start(&etimer_process, NULL);

    /* Start process of user */
    monitor_Init();
    demo_Init();

    while (1) 
    {
        while (0 < process_run())
        {
            null();
        }
    }
}


/*--------------------------------------------------------------------------------------------------------
                   									     0ooo
                   								ooo0     (   )
                								(   )     ) /
                								 \ (     (_/
                								  \_)
----------------------------------------------------------------------------------------------------------*/

